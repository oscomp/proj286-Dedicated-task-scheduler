# proj286-Dedicated-task-scheduler
## 基于可编程调度器框架实现一个针对手机平台特定场景的专用任务调度器



## 项目描述

一、当前安卓系统的调度器

目前安卓使用linux内核，其任务调度器主要是完全公平调度器（CFS），由于移动环境中不同的场景对任务调度有不同的需求，CFS这样一个通用的调度器不能在各种应用场景中表现出优秀的性能。

 

二、可编程调度器的意义

可编程调度器允许调度策略在运行时从用户空间加载到内核中，这使得在移动场景中，调度器的调度策略可以根据不同场景中的工作负载特征进行动态的更新。此外，可编程调度器也大大降低了试验新调度方法的难度，允许以一种安全的方式进行实验, 甚至不需要重新启动测试机器。

 

三、sched ext调度类

sched ext调度类把eBPF引入到了内核任务调度器领域，通过标准sched_setscheduler接口函数可以把任务切换到sched ext调度类来控制。sched ext本身的调度逻辑非常简单，更多的策略是通过eBPF注入到内核。

 

四、特定场景的专用调度器

不同的场景有不同的调度需求，在跑分场景，我们希望调度器有更高的吞吐量。在浏览网页的场景，我们期望调度器有更好的响应时延。在观看视频场景，我们期望调度器能有较低的功耗。本项目的目标就是实现不同场景的专用eBPF调度器并且在运行时注入内核。



## 预期目标

第一题：搭建基本的开发环境（可以通过PC模拟或者基于google pixel手机），打上可编程任务调度器框架的补丁，调试示例性的eBPF scheduler，熟悉可编程调度器的基础知识；

 

第二题：在google pixel手机上实现一个偏向吞吐量的eBPF scheduler，通过安兔兔测试其性能，要求安兔兔的整体分数由于当前调度器；

 

第三题：在google pixel手机上实现一个关注延迟性能兼顾功耗和吞吐量的eBPF scheduler，通过原神测试其性能，要求帧率稳定性、功耗表现优于当前调度器。





## 特征

1. 具备基本的任务调度器功能；

2. 实现调度策略通过eBPF注入内核的功能；

3. 提供调度延迟量测的功能。

补充说明：参赛团队需先行完成第一题；第一题完成后，OPPO将提供6.1版本以上的Google手机，供团队完成第二、三题。



## 已有参考资料

- [sched ext调度类简介](https://lwn.net/Articles/922405/)；
- [sched ext调度类的补丁集](https://lwn.net/ml/linux-kernel/20230128001639.3510083-1-tj@kernel.org/)



## 赛题分类

内核完善



## 参赛要求

以小组为单位参赛，最多三人一个小组，且小组成员是来自同一所高校的本科生或研究生；

允许学生参加大赛的多个不同题目，最终自己选择一个题目参与评奖；

请遵循“2024全国大学生操作系统比赛”的章程和技术方案要求。



## 难度

中等/高等



## License

GPL v2.



## 所属赛道

2024全国大学生操作系统比赛的“OS功能挑战”赛道

## 项目导师

- 姓名：郭健（OPPO）
- 单位：OPPO
- email：[guojian@oppo.com](mailto:guojian@oppo.com)
